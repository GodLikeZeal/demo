<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zeal.zealsay.admin.modules.article.dao.ArticleDao">
    <!--<cache type="com.zeal.shiyulin.common.RedisCache"/>-->
    <!-- 以下两个<cache>标签二选一,第一个可以输出日志,第二个不输出日志 只要在对应的mapper配置文件中加入<cache />标签即可-->
	<!--<cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>-->
	 <!--<cache type="org.mybatis.caches.ehcache.EhcacheCache"/>-->

<!--Article查询字段-->
    <sql id="queryColumns">
    t.id as id,
    t.collection as collection,
    t.thumbs as thumbs,
    t.dislike as dislike,
    t.praise_num as praiseNum,
    t.praise_money as praiseMoney,
    t.comment as comment,
    t.user_id as userId,
    t.is_del as isDel,
    t.create_date as createDate,
    t.update_date as updateDate,
    t.title as title,
    t.subtitle as subtitle,
    t.pic as pic,
    t.content as content,
    t.type as type,
    t.label as label,
    t.reader as reader,
    t.reprint as reprint
    </sql>

	<!-- INSERT一条Article  -->
	<insert id="insert" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article">
    	insert into article
    	<trim prefix="(" suffix=")" suffixOverrides="," >
				id,
			collection,
			thumbs,
			dislike,
			praise_num,
			praise_money,
			comment,
			user_id,
			is_del,
			create_date,
			update_date,
			title,
			subtitle,
			pic,
			content,
			type,
			label,
			reader,
			reprint,

       </trim>
       <trim prefix="values (" suffix=")" suffixOverrides="," >
    			#{id},
			#{collection},
			#{thumbs},
			#{dislike},
			#{praiseNum},
			#{praiseMoney},
			#{comment},
			#{userId},
			#{isDel},
			#{createDate},
			#{updateDate},
			#{title},
			#{subtitle},
			#{pic},
			#{content},
			#{type},
			#{label},
			#{reader},
			#{reprint},

    	</trim>
	</insert>

	<!-- 根据id来UPDATE Article-->
	<update id="update" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article">
    	update article
    	 <trim prefix="set" suffixOverrides=",">
    			<if test="collectionChanged==true">
			  collection=#{collection},
			</if>
			<if test="thumbsChanged==true">
			  thumbs=#{thumbs},
			</if>
			<if test="dislikeChanged==true">
			  dislike=#{dislike},
			</if>
			<if test="praiseNumChanged==true">
			  praise_num=#{praiseNum},
			</if>
			<if test="praiseMoneyChanged==true">
			  praise_money=#{praiseMoney},
			</if>
			<if test="commentChanged==true">
			  comment=#{comment},
			</if>
			<if test="userIdChanged==true">
			  user_id=#{userId},
			</if>
			<if test="isDelChanged==true">
			  is_del=#{isDel},
			</if>
			<if test="createDateChanged==true">
			  create_date=#{createDate},
			</if>
			<if test="updateDateChanged==true">
			  update_date=#{updateDate},
			</if>
			<if test="titleChanged==true">
			  title=#{title},
			</if>
			<if test="subtitleChanged==true">
			  subtitle=#{subtitle},
			</if>
			<if test="picChanged==true">
			  pic=#{pic},
			</if>
			<if test="contentChanged==true">
			  content=#{content},
			</if>
			<if test="typeChanged==true">
			  type=#{type},
			</if>
			<if test="labelChanged==true">
			  label=#{label},
			</if>
			<if test="readerChanged==true">
			  reader=#{reader},
			</if>
			<if test="reprintChanged==true">
			  reprint=#{reprint},
			</if>

      </trim>
    	where id = #{id}

    </update>

    <!-- 根据条件来伪删除Article  -->
	<update id="del" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article">
		update article set is_del=${DEL_FLAG_DEL}
		<include refid="whereCause"></include>
	</update>

	<!-- 根据id来伪删除一条Article  -->
    <update id="delById" parameterType="java.lang.String">
		update article set is_del=${DEL_FLAG_DEL}
		where id = #{id}

	</update>

	<!-- 根据条件来DELETEArticle  -->
	<delete id="delete" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article">
		delete from article t
		<include refid="whereCause"></include>
	</delete>

		<!-- 根据id来DELETE一条Article  -->
    <delete id="deleteById" parameterType="java.lang.String">
		delete from article
		where id = #{id}

	</delete>


	<sql id="whereCause">
		<where>
            <choose>
                <when test="islike==1">
                  <if test="id != null">
                     and t.id LIKE  CONCAT('%',#{id},'%')
                  </if>
                  <if test="collection != null">
                     and t.collection LIKE  CONCAT('%',#{collection},'%')
                  </if>
                  <if test="thumbs != null">
                     and t.thumbs LIKE  CONCAT('%',#{thumbs},'%')
                  </if>
                  <if test="dislike != null">
                     and t.dislike LIKE  CONCAT('%',#{dislike},'%')
                  </if>
                  <if test="praiseNum != null">
                     and t.praise_num LIKE  CONCAT('%',#{praiseNum},'%')
                  </if>
                  <if test="praiseMoney != null">
                     and t.praise_money LIKE  CONCAT('%',#{praiseMoney},'%')
                  </if>
                  <if test="comment != null">
                     and t.comment LIKE  CONCAT('%',#{comment},'%')
                  </if>
                  <if test="userId != null">
                     and t.user_id LIKE  CONCAT('%',#{userId},'%')
                  </if>
                  <if test="isDel != null">
                     and t.is_del LIKE  CONCAT('%',#{isDel},'%')
                  </if>
                  <if test="createDate != null">
                     and t.create_date LIKE  CONCAT('%',#{createDate},'%')
                  </if>
                  <if test="updateDate != null">
                     and t.update_date LIKE  CONCAT('%',#{updateDate},'%')
                  </if>
                  <if test="title != null">
                     and t.title LIKE  CONCAT('%',#{title},'%')
                  </if>
                  <if test="subtitle != null">
                     and t.subtitle LIKE  CONCAT('%',#{subtitle},'%')
                  </if>
                  <if test="pic != null">
                     and t.pic LIKE  CONCAT('%',#{pic},'%')
                  </if>
                  <if test="content != null">
                     and t.content LIKE  CONCAT('%',#{content},'%')
                  </if>
                  <if test="type != null">
                     and t.type LIKE  CONCAT('%',#{type},'%')
                  </if>
                  <if test="label != null">
                     and t.label LIKE  CONCAT('%',#{label},'%')
                  </if>
                  <if test="reader != null">
                     and t.reader LIKE  CONCAT('%',#{reader},'%')
                  </if>
                  <if test="reprint != null">
                     and t.reprint LIKE  CONCAT('%',#{reprint},'%')
                  </if>
                </when>
                <otherwise>
                  <if test="id != null">
                      and t.id = #{id}
                  </if>
                  <if test="collection != null">
                      and t.collection = #{collection}
                  </if>
                  <if test="thumbs != null">
                      and t.thumbs = #{thumbs}
                  </if>
                  <if test="dislike != null">
                      and t.dislike = #{dislike}
                  </if>
                  <if test="praiseNum != null">
                      and t.praise_num = #{praiseNum}
                  </if>
                  <if test="praiseMoney != null">
                      and t.praise_money = #{praiseMoney}
                  </if>
                  <if test="comment != null">
                      and t.comment = #{comment}
                  </if>
                  <if test="userId != null">
                      and t.user_id = #{userId}
                  </if>
                  <if test="isDel != null">
                      and t.is_del = #{isDel}
                  </if>
                  <if test="createDate != null">
                      and t.create_date = #{createDate}
                  </if>
                  <if test="updateDate != null">
                      and t.update_date = #{updateDate}
                  </if>
                  <if test="title != null">
                      and t.title = #{title}
                  </if>
                  <if test="subtitle != null">
                      and t.subtitle = #{subtitle}
                  </if>
                  <if test="pic != null">
                      and t.pic = #{pic}
                  </if>
                  <if test="content != null">
                      and t.content = #{content}
                  </if>
                  <if test="type != null">
                      and t.type = #{type}
                  </if>
                  <if test="label != null">
                      and t.label = #{label}
                  </if>
                  <if test="reader != null">
                      and t.reader = #{reader}
                  </if>
                  <if test="reprint != null">
                      and t.reprint = #{reprint}
                  </if>
                </otherwise>
            </choose>

		</where>
	</sql>

    <!-- 根据ID来查找一条Article -->
    <select id="findById" parameterType="java.lang.String"
			resultType="com.zeal.zealsay.admin.modules.article.entity.Article">
		select <include refid="queryColumns"></include>
		from article
		where id = #{id}

	</select>

    <!-- 根据Class来查找Article -->
	<select id="findByClass" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article"
			resultType="com.zeal.zealsay.admin.modules.article.entity.Article">
		select <include refid="queryColumns"></include>
		from article t
		<include refid="whereCause"></include>
	</select>

<!-- 根据Class来分页查询查找Article -->
	<select id="findByClassPaginate" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article"
			resultType="com.zeal.zealsay.admin.modules.article.entity.Article">
		select * from article t
		<include refid="whereCause"></include>
		order by ${order} ${sort} limit  #{start},#{size}
	</select>

<!-- 根据Class来分页查询查找Article的分页总数量 -->
	<select id="findByClassPaginateCount" parameterType="com.zeal.zealsay.admin.modules.article.entity.Article"
			resultType="long">
		select count(1) from article t
		<include refid="whereCause"></include>
	</select>



</mapper>